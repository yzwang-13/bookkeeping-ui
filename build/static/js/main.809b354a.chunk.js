(this["webpackJsonpbookkeeping-ui"]=this["webpackJsonpbookkeeping-ui"]||[]).push([[0],{142:function(e,n,t){e.exports={btn:"Button_btn__2T0J7"}},146:function(e,n,t){e.exports={expenses:"Expenses_expenses__1MjxY"}},147:function(e,n,t){e.exports={"expenses-list":"ExpenseItems_expenses-list__3aV3R","expenses-list__fallback":"ExpenseItems_expenses-list__fallback__CKx0I"}},152:function(e,n,t){},153:function(e,n,t){},165:function(e,n){},167:function(e,n){},178:function(e,n){},180:function(e,n){},205:function(e,n){},207:function(e,n){},208:function(e,n){},213:function(e,n){},215:function(e,n){},234:function(e,n){},246:function(e,n){},249:function(e,n){},254:function(e,n,t){"use strict";t.r(n);var c=t(1),s=t.n(c),r=t(52),a=t.n(r),o=(t(152),t(153),t(8)),i=t(20),l=t(81),u=t.n(l),j=t(89),d=t(142),p=t.n(d),x=t(0),b=function(e){return Object(x.jsx)("button",Object(j.a)(Object(j.a)({className:p.a.btn},e),{},{children:e.children}))},h=t(9),m=t.n(h),O=t(24),f=t(35),v=t(143),g=s.a.createContext({idToken:"",isLoggedIn:!1,login:function(e){},logout:function(){},register:function(e,n){Object(v.a)(e)}}),_=function(e){var n=Object(c.useState)(!1),t=Object(f.a)(n,2),s=(t[0],t[1]),r=Object(c.useState)(null),a=Object(f.a)(r,2),o=(a[0],a[1]),i=!!localStorage.getItem("id_token"),l=Object(c.useState)(null),u=Object(f.a)(l,2),j=u[0],d=u[1],p={idToken:j,isLoggedIn:i,login:function(e){d(e),localStorage.setItem("id_token",e)},logout:function(){d(null),localStorage.removeItem("id_token")},register:Object(c.useCallback)(Object(O.a)(m.a.mark((function e(){var n,t,c,r,a=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>0&&void 0!==a[0]?a[0]:{},t=a.length>1&&void 0!==a[1]?a[1]:function(){},e.prev=2,s(!0),o(null),c=null,e.prev=6,e.next=9,fetch(n.url,{method:n.method?n.method:"POST",body:n.body?JSON.stringify(n.body):null,headers:n.headers?n.headers:{}});case 9:if((c=e.sent).ok){e.next=12;break}throw new Error("register account failed, please try again later");case 12:return e.next=14,c.json();case 14:r=e.sent,console.log(r),t(r),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(6),console.log(e.t0),t({error:"register account failed, please try again later"});case 23:e.next=28;break;case 25:e.prev=25,e.t1=e.catch(2),o(e.t1.message||"Something went wrong!");case 28:s(!1);case 29:case"end":return e.stop()}}),e,null,[[2,25],[6,19]])}))),[])};return Object(x.jsx)(g.Provider,{value:p,children:e.children})},w=function(){var e=Object(c.useContext)(g),n=Object(o.g)();console.log("main nav"),console.log(n.location.pathname);n.location.pathname.startsWith("/auth");return Object(x.jsxs)("header",{className:u.a.header,children:[Object(x.jsx)(i.b,{to:"/",children:Object(x.jsx)("div",{className:u.a.logo,children:"Daily Bookkeeping"})}),Object(x.jsx)("nav",{children:Object(x.jsxs)("ul",{children:[(null===e||void 0===e?void 0:e.isLoggedIn)&&Object(x.jsx)("li",{children:Object(x.jsx)(i.b,{to:"/expenses",children:"My Expenses"})}),(null===e||void 0===e?void 0:e.isLoggedIn)&&Object(x.jsx)("li",{children:Object(x.jsx)(i.b,{to:"/new-expense",children:"Add New Expense"})}),(null===e||void 0===e?void 0:e.isLoggedIn)&&Object(x.jsx)("li",{children:Object(x.jsx)(b,{children:"Logout"})})]})})]})},y=function(e){return Object(x.jsxs)(c.Fragment,{children:[Object(x.jsx)(w,{}),Object(x.jsx)("main",{children:e.children})]})},N=t(7),k=t.n(N),F=t(27),I=t(84),S=t(85),P=t(86),C=function(e){var n=Object(c.useRef)(null),t=Object(c.useRef)(null),s=Object(c.useRef)(null),r="".concat(k.a.container," ").concat(k.a["left-panel-active"]),a="".concat(k.a.container," ").concat(k.a["right-panel-active"]);console.log("auth form");var i=Object(c.useState)(a),l=Object(f.a)(i,2),u=l[0],j=l[1],d=Object(o.g)(),p=Object(c.useContext)(g),b=function(){var e=Object(O.a)(m.a.mark((function e(n){var t,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),console.log("signup form submitted"),t=function(){var e=Object(O.a)(m.a.mark((function e(n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.error?console.log("has error"):(console.log(n),d.push("/auth/changePassword?id=".concat(n.User.Username)));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),console.log(s.current.value),c={url:"http://localhost:3000/prod/auth/cognito/signup",method:"POST",body:{email:s.current.value},headers:{"Content-Type":"application/json"}},e.next=7,null===p||void 0===p?void 0:p.register(c,t);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),h=function(){var e=Object(O.a)(m.a.mark((function e(n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),console.log("signin form submitted"),console.log(n),d.push("/auth/changePassword");case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(x.jsx)("section",{className:k.a.auth,children:Object(x.jsxs)("div",{className:u,id:"container",children:[Object(x.jsx)("div",{className:"".concat(k.a["form-container"]," ").concat(k.a["sign-up-container"]),children:Object(x.jsxs)("form",{onSubmit:b,children:[Object(x.jsx)("h1",{children:"Create Account"}),Object(x.jsxs)("div",{className:k.a["social-container"],children:[Object(x.jsx)(F.a,{className:k.a.icon,icon:I.faFacebook}),Object(x.jsx)(F.a,{className:k.a.icon,icon:S.faGoogle}),Object(x.jsx)(F.a,{className:k.a.icon,icon:P.faLinkedin})]}),Object(x.jsx)("span",{children:"or use your email for registration"}),Object(x.jsx)("input",{type:"email",placeholder:"Email",ref:s}),Object(x.jsx)("button",{type:"submit",children:"Sign Up"})]})}),Object(x.jsx)("div",{className:"".concat(k.a["form-container"]," ").concat(k.a["sign-in-container"]),children:Object(x.jsxs)("form",{onSubmit:h,children:[Object(x.jsx)("h1",{children:"Sign in"}),Object(x.jsxs)("div",{className:k.a["social-container"],children:[Object(x.jsx)(F.a,{className:k.a.icon,icon:I.faFacebook}),Object(x.jsx)(F.a,{className:k.a.icon,icon:S.faGoogle}),Object(x.jsx)(F.a,{className:k.a.icon,icon:P.faLinkedin})]}),Object(x.jsx)("span",{children:"or use your account"}),Object(x.jsx)("input",{ref:n,type:"email",placeholder:"Email"}),Object(x.jsx)("input",{ref:t,type:"password",placeholder:"Password"}),Object(x.jsx)("a",{className:k.a.icon,href:"#",children:"Forgot your password?"}),Object(x.jsx)("button",{type:"submit",children:"Sign In"})]})}),Object(x.jsx)("div",{className:k.a["overlay-container"],children:Object(x.jsxs)("div",{className:k.a.overlay,children:[Object(x.jsxs)("div",{className:"".concat(k.a["overlay-panel"]," ").concat(k.a["overlay-left"]),children:[Object(x.jsx)("h1",{children:"Welcome Back!"}),Object(x.jsx)("p",{children:"To keep connected with us please login with your personal info"}),Object(x.jsx)("button",{onClick:function(e){j(r)},className:k.a.ghost,id:"signIn",children:"Sign In"})]}),Object(x.jsxs)("div",{className:"".concat(k.a["overlay-panel"]," ").concat(k.a["overlay-right"]),children:[Object(x.jsx)("h1",{children:"Hello, Friend!"}),Object(x.jsx)("p",{children:"Enter your personal details and start journey with us"}),Object(x.jsx)("button",{onClick:function(e){j(a)},className:k.a.ghost,id:"signUp",children:"Sign Up"})]})]})})]})})},E=t(28),A=t.n(E),R=t(144),L=t(145),D=t(56),M=function(){function e(){Object(R.a)(this,e)}return Object(L.a)(e,null,[{key:"signIn",value:function(n,t,c){return new Promise((function(s,r){n=n.toLowerCase().trim();var a=new D.a({Username:n,Password:t}),o=new D.b({Username:n,Pool:e.POOL_INFO});o.authenticateUser(a,{newPasswordRequired:function(e,n){o.completeNewPasswordChallenge(c,null,{onSuccess:function(e){s(e)},onFailure:function(e){r(e)}})},onSuccess:function(e){s(e)},onFailure:function(e){r(e)}})}))}}]),e}();M.POOL_INFO=new D.c({UserPoolId:"ap-southeast-2_MHcajUNDA",ClientId:"138ous4gmaf1ev6slmodof0kjj"});var U=function(e){var n=Object(o.h)(),t=new URLSearchParams(n.search).get("id");console.log(t);var s=Object(c.useRef)(null),r=Object(c.useRef)(null),a=Object(c.useRef)(null),i=function(){var e=Object(O.a)(m.a.mark((function e(n){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,console.log("aaaa");case 3:if(r.current.value===a.current.value){e.next=8;break}r.current.value="",a.current.value="",e.next=13;break;case 8:return null===s.current.value&&(s.current.value=""),e.next=11,M.signIn(t,s.current.value,r.current.value);case 11:c=e.sent,console.log(c);case 13:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(x.jsxs)("form",{className:A.a.form,onSubmit:i,children:[Object(x.jsx)("div",{className:A.a.title,children:"Almost done"}),Object(x.jsx)("div",{className:A.a.subtitle,children:"Please setup your password"}),Object(x.jsxs)("div",{className:A.a.inputContainer,children:[Object(x.jsx)("label",{htmlFor:"tempPassword",className:"placeholder",children:"Your temporary password received in your email"}),Object(x.jsx)("input",{id:"tempPassword",className:"input",type:"password",ref:s})]}),Object(x.jsxs)("div",{className:A.a.inputContainer,children:[Object(x.jsx)("label",{htmlFor:"password1",className:"placeholder",children:"Your new password"}),Object(x.jsx)("input",{id:"password1",className:"input",type:"password",ref:r})]}),Object(x.jsxs)("div",{className:A.a.inputContainer,children:[Object(x.jsx)("label",{htmlFor:"password2",children:"Re-enter your password"}),Object(x.jsx)("input",{id:"password2",type:"password",ref:a})]}),Object(x.jsx)(b,{type:"submit",children:"submit"})]})},T=function(){return console.log("auth page"),Object(x.jsxs)(o.d,{children:[Object(x.jsx)(o.b,{path:"/auth/changePassword",children:Object(x.jsx)(U,{})}),Object(x.jsx)(o.b,{path:"/auth",children:Object(x.jsx)(C,{})})]})},Y=t(146),B=t.n(Y),H=t(55),J=t.n(H),G=t(25),K=t.n(G),V=function(e){console.log(e.expenseItem);var n=K.a.unix(+e.expenseItem.timestamp).format("DD-MM-YYYY");return Object(x.jsx)("li",{children:Object(x.jsxs)("div",{className:J.a["expense-item"],children:[Object(x.jsx)("div",{children:n}),Object(x.jsxs)("div",{className:J.a["expense-item__description"],children:[Object(x.jsx)("h2",{children:e.expenseItem.category}),Object(x.jsx)("h2",{children:e.expenseItem.vendor}),Object(x.jsxs)("div",{className:J.a["expense-item__price"],children:["$",e.expenseItem.price]})]})]})})},W=t(147),Z=t.n(W),z=function(e){var n=e.expenses.map((function(e){return Object(x.jsx)(V,{expenseItem:e})}));return Object(x.jsx)("ul",{className:Z.a["expenses-list"],children:n})},Q=function(e){return Object(x.jsx)("div",{className:B.a.expenses,children:Object(x.jsx)(z,{expenses:e.expenses})})},q=function(e){return console.log("expenses"),Object(x.jsx)(Q,{expenses:e.expenses})},$=t(29),X=t.n($),ee=t(88),ne=t.n(ee),te=Object(c.forwardRef)((function(e,n){return Object(x.jsx)("div",{className:ne.a["new-expense__controls"],children:Object(x.jsxs)("div",{className:ne.a["new-expense__control"],children:[Object(x.jsx)("label",{children:"Date"}),Object(x.jsx)("input",{type:"date",min:"2019-01-01",max:"2022-12-31",ref:n})]})})})),ce=t(45),se=ce.c,re=t(54),ae={expenses:[{id:"1",timestamp:K()("2021-05-31").unix().toString(),category:"Eat",vendor:"KFC",description:"Chicken",price:55},{id:"2",timestamp:K()("2021-05-31").unix().toString(),category:"Transport",vendor:"Service",description:"Rego for BZ79HL",price:800},{id:"3",timestamp:K()("2021-04-27").unix().toString(),category:"Clothing",vendor:"Myer",description:"T-shirt",price:100},{id:"4",timestamp:K()("2021-03-31").unix().toString(),category:"Eat",vendor:"Mcdownald",description:"Burger",price:25},{id:"5",timestamp:K()("2021-02-28").unix().toString(),category:"Eat",vendor:"Happy Ending Burgers",description:"Burgers",price:12}]},oe=Object(re.b)({name:"expenses",initialState:ae,reducers:{addExpense:function(e,n){var t=n.payload.expense;e.expenses.push(t)}}}),ie=oe.reducer,le=oe.actions,ue=function(e){var n=Object(c.useRef)(null),t=Object(c.useRef)(null),s=Object(c.useRef)(null),r=Object(c.useRef)(null),a=Object(c.useRef)(null),o=Object(ce.b)();return Object(x.jsx)("section",{className:X.a["new-expense"],children:Object(x.jsxs)("form",{onSubmit:function(e){var c,i,l;e.preventDefault();var u=n.current.value,j=null===(c=t.current)||void 0===c?void 0:c.value,d=null===(i=s.current)||void 0===i?void 0:i.value,p=null===(l=r.current)||void 0===l?void 0:l.value,x=+a.current.value;console.log(u);var b={id:Math.random().toString(),timestamp:new Date(u).getTime().toString(),category:j||"",vendor:d||"",description:p||"",price:x};o(le.addExpense({expense:b}))},children:[Object(x.jsx)(te,{ref:n}),Object(x.jsxs)("div",{className:X.a.control,children:[Object(x.jsx)("label",{htmlFor:"category",children:"Category"}),Object(x.jsx)("input",{type:"text",id:"category",ref:t})]}),Object(x.jsxs)("div",{className:X.a.control,children:[Object(x.jsx)("label",{htmlFor:"vendor",children:"Vendor"}),Object(x.jsx)("input",{type:"text",id:"vendor",ref:s})]}),Object(x.jsxs)("div",{className:X.a.control,children:[Object(x.jsx)("label",{htmlFor:"description",children:"Description"}),Object(x.jsx)("textarea",{id:"description",ref:r})]}),Object(x.jsxs)("div",{className:X.a.control,children:[Object(x.jsx)("label",{htmlFor:"expense",children:"Expense Amount"}),Object(x.jsx)("input",{type:"number",id:"expense",ref:a})]}),Object(x.jsx)("div",{className:X.a.actions,children:Object(x.jsx)(b,{type:"submit",children:"submit"})})]})})},je=function(e){return Object(x.jsx)(ue,{})};var de=function(){var e=se((function(e){return e.expenses.expenses})),n=Object(c.useContext)(g);return Object(x.jsx)(y,{children:Object(x.jsxs)(o.d,{children:[!(null===n||void 0===n?void 0:n.isLoggedIn)&&Object(x.jsx)(o.b,{path:"/auth",children:Object(x.jsx)(T,{})}),(null===n||void 0===n?void 0:n.isLoggedIn)&&Object(x.jsxs)(s.a.Fragment,{children:[Object(x.jsx)(o.b,{path:"/expenses",children:Object(x.jsx)(q,{expenses:e})}),Object(x.jsx)(o.b,{path:"/new-expense",children:Object(x.jsx)(je,{})})]}),Object(x.jsx)(o.b,{path:"*",children:Object(x.jsx)(o.a,{to:"/auth"})})]})})},pe=Object(re.a)({reducer:{expenses:ie}});a.a.render(Object(x.jsx)(_,{children:Object(x.jsx)(ce.a,{store:pe,children:Object(x.jsx)(i.a,{children:Object(x.jsx)(de,{})})})}),document.getElementById("root"))},28:function(e,n,t){e.exports={form:"ChangePassword_form__EZFFy",title:"ChangePassword_title__Gbvba",subtitle:"ChangePassword_subtitle__GgwNQ"}},29:function(e,n,t){e.exports={"new-expense":"ExpenseForm_new-expense__1hWOv",control:"ExpenseForm_control__bKyJ3",actions:"ExpenseForm_actions__4VVkd"}},55:function(e,n,t){e.exports={"expense-item":"ExpenseItem_expense-item__8ilYZ","expense-item__description":"ExpenseItem_expense-item__description__3_c4h","expense-item__price":"ExpenseItem_expense-item__price__22xt9"}},7:function(e,n,t){e.exports={auth:"AuthForm_auth__MPw6W",icon:"AuthForm_icon__238mZ",ghost:"AuthForm_ghost__37eou",container:"AuthForm_container__c83gh","form-container":"AuthForm_form-container__2NNLg","sign-in-container":"AuthForm_sign-in-container__34zCK","right-panel-active":"AuthForm_right-panel-active__2fbII","sign-up-container":"AuthForm_sign-up-container__u-vbn",show:"AuthForm_show__nrvjD","overlay-container":"AuthForm_overlay-container__2f-wM",overlay:"AuthForm_overlay__2H55p","overlay-panel":"AuthForm_overlay-panel__1J6zu","overlay-left":"AuthForm_overlay-left__1Pggz","overlay-right":"AuthForm_overlay-right__3U_u4","social-container":"AuthForm_social-container__6bFYQ"}},81:function(e,n,t){e.exports={header:"MainNavigation_header__2lqQ1",logo:"MainNavigation_logo__1TgMx"}},88:function(e,n,t){e.exports={"new-expense__controls":"DatePicker_new-expense__controls__197ok","new-expense__control":"DatePicker_new-expense__control__38Hca","new-expense__actions":"DatePicker_new-expense__actions__3afU5"}}},[[254,1,2]]]);
//# sourceMappingURL=main.809b354a.chunk.js.map